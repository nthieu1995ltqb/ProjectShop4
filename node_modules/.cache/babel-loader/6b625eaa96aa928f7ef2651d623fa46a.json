{"ast":null,"code":"var data = JSON.parse(localStorage.getItem('CART'));\nvar initialState = data ? data : [];\n\nconst cartProduct = (state = initialState, action) => {\n  var product = action.product,\n      quantity = action.quantity;\n  var index = -1;\n\n  switch (action.type) {\n    case 'ADD_TO_CART':\n      //console.log(action);\n      index = findProductInCart(state, product);\n\n      if (index !== -1) {\n        state[index].quantity += quantity;\n      } else {\n        state.push({\n          product,\n          quantity\n        });\n      }\n\n      localStorage.setItem('CART', JSON.stringify(state));\n      return [...state];\n\n    case 'DELETE_PRODUCT_IN_CART':\n      index = findProductInCart(state, product);\n\n      if (index !== -1) {\n        state.splice(index, 1);\n      }\n\n      localStorage.setItem('CART', JSON.stringify(state));\n      return [...state];\n\n    case 'UPDATE_PRODUCT_IN_CART':\n      index = findProductInCart(state, product);\n\n      if (index !== -1) {\n        state[index].quantity = quantity;\n      }\n\n      localStorage.setItem('CART', JSON.stringify(state));\n      return [...state];\n\n    case 'CHECKOUT_PRODUCT_IN_CART':\n      //console.log(\"ok\")\n      state = [];\n      localStorage.removeItem('CART', JSON.stringify(state));\n      return [...state];\n    // default: \n    // return [...state];\n\n    default:\n      return [...state];\n  }\n};\n\nvar findProductInCart = (cartProduct, product) => {\n  var index = -1; // -1 nghia la k tim thay\n\n  if (cartProduct.length > 0) {\n    for (var i = 0; i < cartProduct.length; i++) {\n      if (cartProduct[i].product.id === product.id) {\n        index = i;\n        break;\n      }\n    }\n  }\n\n  return index;\n};\n\nexport default cartProduct;","map":{"version":3,"sources":["C:/Users/TGDD/Desktop/ProjectShop4/src/reducers/cartProduct.js"],"names":["data","JSON","parse","localStorage","getItem","initialState","cartProduct","state","action","product","quantity","index","type","findProductInCart","push","setItem","stringify","splice","removeItem","length","i","id"],"mappings":"AACA,IAAIA,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX;AACA,IAAIC,YAAY,GAAGL,IAAI,GAAGA,IAAH,GAAU,EAAjC;;AAEA,MAAMM,WAAW,GAAG,CAACC,KAAK,GAAGF,YAAT,EAAuBG,MAAvB,KAAkC;AAAA,MAC7CC,OAD6C,GACxBD,MADwB,CAC7CC,OAD6C;AAAA,MACpCC,QADoC,GACxBF,MADwB,CACpCE,QADoC;AAElD,MAAIC,KAAK,GAAG,CAAC,CAAb;;AACA,UAAOH,MAAM,CAACI,IAAd;AACI,SAAK,aAAL;AACI;AACAD,MAAAA,KAAK,GAAGE,iBAAiB,CAACN,KAAD,EAAQE,OAAR,CAAzB;;AACA,UAAGE,KAAK,KAAK,CAAC,CAAd,EAAgB;AACZJ,QAAAA,KAAK,CAACI,KAAD,CAAL,CAAaD,QAAb,IAAyBA,QAAzB;AACH,OAFD,MAEO;AACHH,QAAAA,KAAK,CAACO,IAAN,CAAW;AACPL,UAAAA,OADO;AAEPC,UAAAA;AAFO,SAAX;AAIH;;AACDP,MAAAA,YAAY,CAACY,OAAb,CAAqB,MAArB,EAA6Bd,IAAI,CAACe,SAAL,CAAeT,KAAf,CAA7B;AACA,aAAO,CAAC,GAAGA,KAAJ,CAAP;;AAEJ,SAAK,wBAAL;AACII,MAAAA,KAAK,GAAGE,iBAAiB,CAACN,KAAD,EAAQE,OAAR,CAAzB;;AACA,UAAGE,KAAK,KAAK,CAAC,CAAd,EAAgB;AACZJ,QAAAA,KAAK,CAACU,MAAN,CAAaN,KAAb,EAAoB,CAApB;AACH;;AACDR,MAAAA,YAAY,CAACY,OAAb,CAAqB,MAArB,EAA6Bd,IAAI,CAACe,SAAL,CAAeT,KAAf,CAA7B;AACA,aAAO,CAAC,GAAGA,KAAJ,CAAP;;AAEJ,SAAK,wBAAL;AACII,MAAAA,KAAK,GAAGE,iBAAiB,CAACN,KAAD,EAAQE,OAAR,CAAzB;;AACA,UAAGE,KAAK,KAAK,CAAC,CAAd,EAAgB;AACZJ,QAAAA,KAAK,CAACI,KAAD,CAAL,CAAaD,QAAb,GAAwBA,QAAxB;AACH;;AACDP,MAAAA,YAAY,CAACY,OAAb,CAAqB,MAArB,EAA6Bd,IAAI,CAACe,SAAL,CAAeT,KAAf,CAA7B;AACA,aAAO,CAAC,GAAGA,KAAJ,CAAP;;AAEJ,SAAK,0BAAL;AACI;AACAA,MAAAA,KAAK,GAAG,EAAR;AACAJ,MAAAA,YAAY,CAACe,UAAb,CAAwB,MAAxB,EAAgCjB,IAAI,CAACe,SAAL,CAAeT,KAAf,CAAhC;AACA,aAAO,CAAC,GAAGA,KAAJ,CAAP;AAEJ;AACA;;AACA;AACI,aAAO,CAAC,GAAGA,KAAJ,CAAP;AAxCR;AA0CH,CA7CD;;AA+CA,IAAIM,iBAAiB,GAAG,CAACP,WAAD,EAAcG,OAAd,KAA0B;AAC9C,MAAIE,KAAK,GAAG,CAAC,CAAb,CAD8C,CAE9C;;AACA,MAAIL,WAAW,CAACa,MAAZ,GAAoB,CAAxB,EAA0B;AACtB,SAAI,IAAIC,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACd,WAAW,CAACa,MAA3B,EAAmCC,CAAC,EAApC,EAAuC;AACnC,UAAGd,WAAW,CAACc,CAAD,CAAX,CAAeX,OAAf,CAAuBY,EAAvB,KAA8BZ,OAAO,CAACY,EAAzC,EAA4C;AACxCV,QAAAA,KAAK,GAAES,CAAP;AACA;AACH;AACJ;AACJ;;AACD,SAAOT,KAAP;AACH,CAZD;;AAcA,eAAeL,WAAf","sourcesContent":["\r\nvar data = JSON.parse(localStorage.getItem('CART'));\r\nvar initialState = data ? data : [];\r\n\r\nconst cartProduct = (state = initialState, action) => {\r\n    var {product, quantity} = action;\r\n    var index = -1;\r\n    switch(action.type){\r\n        case 'ADD_TO_CART':\r\n            //console.log(action);\r\n            index = findProductInCart(state, product);\r\n            if(index !== -1){\r\n                state[index].quantity += quantity;\r\n            } else {\r\n                state.push({\r\n                    product,\r\n                    quantity\r\n                })\r\n            }\r\n            localStorage.setItem('CART', JSON.stringify(state));\r\n            return [...state];\r\n        \r\n        case 'DELETE_PRODUCT_IN_CART':\r\n            index = findProductInCart(state, product);\r\n            if(index !== -1){\r\n                state.splice(index, 1);\r\n            }\r\n            localStorage.setItem('CART', JSON.stringify(state));\r\n            return [...state];\r\n        \r\n        case 'UPDATE_PRODUCT_IN_CART':\r\n            index = findProductInCart(state, product);\r\n            if(index !== -1){\r\n                state[index].quantity = quantity;\r\n            }\r\n            localStorage.setItem('CART', JSON.stringify(state));\r\n            return [...state];\r\n\r\n        case 'CHECKOUT_PRODUCT_IN_CART':\r\n            //console.log(\"ok\")\r\n            state = []\r\n            localStorage.removeItem('CART', JSON.stringify(state));\r\n            return [...state];\r\n\r\n        // default: \r\n        // return [...state];\r\n        default:\r\n            return [...state];\r\n    }\r\n}\r\n\r\nvar findProductInCart = (cartProduct, product) => {\r\n    var index = -1;\r\n    // -1 nghia la k tim thay\r\n    if (cartProduct.length >0){\r\n        for(var i=0; i<cartProduct.length; i++){\r\n            if(cartProduct[i].product.id === product.id){\r\n                index =i;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return index;\r\n}\r\n\r\nexport default cartProduct; "]},"metadata":{},"sourceType":"module"}