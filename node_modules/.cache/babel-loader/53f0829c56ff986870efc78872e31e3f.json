{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TGDD\\\\Desktop\\\\ProjectShop4\\\\src\\\\pages\\\\Signup\\\\Signup.js\";\nimport React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport callApi from '../../utils/apiCaller';\nimport { signInRequest } from '../../actions/actions';\nimport { connect } from 'react-redux';\n\nclass Signup extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      }); //this.clearValidationErr(\"name\");\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      var isValid = true; //var emailPattern = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n      var emailPattern = /[^@]+@[^@]+\\.[^@]+/; //console.log(this.state);\n\n      var _this$state = this.state,\n          name = _this$state.name,\n          address = _this$state.address,\n          phone_number = _this$state.phone_number,\n          email = _this$state.email,\n          password = _this$state.password,\n          verify_password = _this$state.verify_password;\n      var _this$props = this.props,\n          history = _this$props.history,\n          users = _this$props.users; //console.log(users)\n      //this.props.userSignupRequest(this.state);\n\n      if (name === \"\") {\n        //console.log(\"err\")\n        isValid = false;\n        this.showValidationErr(\"name\", \"Bạn phải nhập Họ tên\");\n      } else {\n        this.showValidationErr(\"name\", \"\");\n      }\n\n      if (address === \"\") {\n        //console.log(\"err\")\n        isValid = false;\n        this.showValidationErr(\"address\", \"Bạn phải nhập Họ tên\");\n      } else {\n        this.showValidationErr(\"address\", \"\");\n      } //check phone_number\n\n\n      if (phone_number === \"\") {\n        //console.log(\"err\")\n        isValid = false;\n        this.showValidationErr(\"phone_number\", \"Bạn phải nhập số điện thoại\");\n      } else if (isNaN(phone_number)) {\n        isValid = false;\n        this.showValidationErr(\"phone_number\", \"Số điện thoại là số. Không phải là kí tự\");\n      } else {\n        this.showValidationErr(\"phone_number\", \"\");\n      } //check Email\n\n\n      if (email === \"\") {\n        isValid = false;\n        this.showValidationErr(\"email\", \"Bạn phải nhập Email\");\n      } else if (!emailPattern.test(email)) {\n        isValid = false;\n        this.showValidationErr(\"email\", \"Bạn phải nhập đúng kiểu email. Ví dụ: abc@xyz.com\");\n      } else {\n        this.showValidationErr(\"email\", \"\");\n      }\n\n      users.forEach(eachRow => {\n        if (email === eachRow['email']) {\n          //console.log(\"trung email\")\n          isValid = false;\n          this.showValidationErr(\"email\", \"Email đã được đăng ký\");\n        }\n      }); //check password\n\n      if (password.length < 3) {\n        isValid = false;\n        this.showValidationErr(\"password\", \"Mật khẩu phải nhiều hơn 3 kí tự\");\n      } else {\n        this.showValidationErr(\"password\", \"\");\n      } //check verify_password\n\n\n      if (password !== verify_password) {\n        //console.log(\"pas err\")\n        isValid = false;\n        this.showValidationErr(\"verify_password\", \"Xác nhận mật khẩu không đúng \");\n      } else {\n        this.showValidationErr(\"verify_password\", \"\");\n      } // check dieu kien\n\n\n      if (isValid) {\n        // console.log(\"ok\")\n        callApi('user', 'POST', {\n          name: name,\n          address: address,\n          phone_number: phone_number,\n          email: email,\n          password: password\n        }, {\n          withCredentials: true\n        }).then(res => {\n          history.push(\"/login\");\n        });\n      }\n    };\n\n    this.state = {\n      name: \"\",\n      address: \"\",\n      phone_number: \"\",\n      email: \"\",\n      password: \"\",\n      verify_password: \"\",\n      errors: []\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  showValidationErr(elm, msg) {\n    this.setState(prevState => ({\n      errors: [...prevState.errors, {\n        elm,\n        msg\n      }]\n    }));\n  }\n\n  componentDidMount() {\n    this.props.allUsers();\n  }\n\n  render() {\n    //var {name, phone_number, email, password, verify_password} = this.state;\n    let addressErr,\n        phone_numberErr,\n        passwordErr,\n        nameErr,\n        emailErr,\n        verify_passwordErr = null;\n\n    for (let err of this.state.errors) {\n      if (err.elm === \"phone_number\") {\n        phone_numberErr = err.msg;\n      }\n\n      if (err.elm === \"password\") {\n        passwordErr = err.msg;\n      }\n\n      if (err.elm === \"name\") {\n        nameErr = err.msg;\n      }\n\n      if (err.elm === \"address\") {\n        addressErr = err.msg;\n      }\n\n      if (err.elm === \"email\") {\n        emailErr = err.msg;\n      }\n\n      if (err.elm === \"verify_password\") {\n        verify_passwordErr = err.msg;\n      }\n    }\n\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"breadcrumbs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"ol\", {\n      className: \"breadcrumb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"Trang Ch\\u1EE7\")), React.createElement(\"li\", {\n      className: \"active\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"\\u0110\\u0103ng K\\xFD\"))), React.createElement(\"div\", {\n      className: \"row signup\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-6 col-sm-offset-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"login-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"\\u0110\\u0103ng K\\xFD T\\xE0i Kho\\u1EA3n\"), React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      action: \"#\",\n      className: \"signup-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      id: \"name\",\n      name: \"name\",\n      value: this.state.name,\n      placeholder: \"H\\u1ECD T\\xEAn\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }), React.createElement(\"small\", {\n      className: \"text-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \" \", nameErr ? nameErr : \"\", \" \"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"address\",\n      name: \"address\",\n      value: this.state.address,\n      placeholder: \"\\u0110\\u1ECBa Ch\\u1EC9\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }), React.createElement(\"small\", {\n      className: \"text-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \" \", addressErr ? addressErr : \"\", \" \"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"phone_number\",\n      name: \"phone_number\",\n      value: this.state.phone_number,\n      placeholder: \"S\\u1ED1 \\u0110i\\u1EC7n Tho\\u1EA1i\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }), React.createElement(\"small\", {\n      className: \"text-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \" \", phone_numberErr ? phone_numberErr : \"\", \" \"), React.createElement(\"input\", {\n      type: \"text\",\n      id: \"email\",\n      name: \"email\",\n      value: this.state.email,\n      placeholder: \"Email\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }), React.createElement(\"small\", {\n      className: \"text-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \" \", emailErr ? emailErr : \"\", \" \"), React.createElement(\"input\", {\n      type: \"password\",\n      id: \"password\",\n      name: \"password\",\n      value: this.state.password,\n      placeholder: \"M\\u1EADt Kh\\u1EA9u\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }), React.createElement(\"small\", {\n      className: \"text-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, \" \", passwordErr ? passwordErr : \"\", \" \"), React.createElement(\"input\", {\n      type: \"password\",\n      id: \"verify_password\",\n      value: this.state.verify_password,\n      name: \"verify_password\",\n      placeholder: \"X\\xE1c Nh\\u1EADn M\\u1EADt Kh\\u1EA9u\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }), React.createElement(\"small\", {\n      className: \"text-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \" \", verify_passwordErr ? verify_passwordErr : \"\", \" \"), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-default\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, \"\\u0110\\u0103ng K\\xFD\"))))));\n  }\n\n} //export default Signup;\n\n\nconst mapStateToProps = state => {\n  return {\n    users: state.user\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n    allUsers: () => {\n      dispatch(signInRequest());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Signup);","map":{"version":3,"sources":["C:/Users/TGDD/Desktop/ProjectShop4/src/pages/Signup/Signup.js"],"names":["React","NavLink","callApi","signInRequest","connect","Signup","Component","constructor","props","handleChange","e","setState","target","id","value","handleSubmit","preventDefault","isValid","emailPattern","state","name","address","phone_number","email","password","verify_password","history","users","showValidationErr","isNaN","test","forEach","eachRow","length","withCredentials","then","res","push","errors","bind","elm","msg","prevState","componentDidMount","allUsers","render","addressErr","phone_numberErr","passwordErr","nameErr","emailErr","verify_passwordErr","err","mapStateToProps","user","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {NavLink} from 'react-router-dom';\r\nimport callApi from '../../utils/apiCaller';\r\nimport { signInRequest } from '../../actions/actions';\r\nimport {connect} from 'react-redux';\r\n\r\nclass Signup extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            name: \"\",\r\n            address: \"\",\r\n            phone_number: \"\",\r\n            email: \"\",\r\n            password: \"\",\r\n            verify_password: \"\",\r\n            errors: []\r\n        }\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n    showValidationErr(elm, msg){\r\n        this.setState((prevState) => ({errors: [...prevState.errors, {elm, msg}] } ));\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.props.allUsers();\r\n    }\r\n    \r\n    handleChange = (e) => {\r\n        this.setState({\r\n            [e.target.id]: e.target.value\r\n        })\r\n        //this.clearValidationErr(\"name\");\r\n    }\r\n  \r\n    handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        var isValid = true;\r\n        //var emailPattern = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        var emailPattern = /[^@]+@[^@]+\\.[^@]+/;\r\n        //console.log(this.state);\r\n        var {name, address, phone_number, email, password, verify_password} = this.state;\r\n        var {history, users} = this.props;\r\n        //console.log(users)\r\n        //this.props.userSignupRequest(this.state);\r\n        if (name === \"\"){\r\n            //console.log(\"err\")\r\n            isValid = false;\r\n            this.showValidationErr(\"name\", \"Bạn phải nhập Họ tên\")\r\n        } else {\r\n            this.showValidationErr(\"name\", \"\")\r\n        }\r\n\r\n        if (address === \"\"){\r\n            //console.log(\"err\")\r\n            isValid = false;\r\n            this.showValidationErr(\"address\", \"Bạn phải nhập Họ tên\")\r\n        } else {\r\n            this.showValidationErr(\"address\", \"\")\r\n        }\r\n        //check phone_number\r\n        if (phone_number === \"\"){\r\n            //console.log(\"err\")\r\n            isValid = false;\r\n            this.showValidationErr(\"phone_number\", \"Bạn phải nhập số điện thoại\")\r\n        } else if (isNaN(phone_number)){\r\n            isValid = false;\r\n            this.showValidationErr(\"phone_number\", \"Số điện thoại là số. Không phải là kí tự\")\r\n        }\r\n         else {\r\n            this.showValidationErr(\"phone_number\", \"\")\r\n        }\r\n        //check Email\r\n\r\n        if (email === \"\"){\r\n            isValid = false;\r\n            this.showValidationErr(\"email\", \"Bạn phải nhập Email\")\r\n        } else if (!emailPattern.test(email)){\r\n            isValid = false;\r\n            this.showValidationErr(\"email\", \"Bạn phải nhập đúng kiểu email. Ví dụ: abc@xyz.com\")\r\n        }\r\n        else {\r\n            this.showValidationErr(\"email\", \"\")\r\n        }\r\n\r\n        users.forEach(eachRow => {\r\n            if (email === eachRow['email']) {\r\n                //console.log(\"trung email\")\r\n                isValid = false;\r\n                this.showValidationErr(\"email\", \"Email đã được đăng ký\")\r\n            }\r\n        });\r\n        //check password\r\n        if (password.length < 3){\r\n            isValid = false;\r\n            this.showValidationErr(\"password\", \"Mật khẩu phải nhiều hơn 3 kí tự\")\r\n        }\r\n         else {\r\n            this.showValidationErr(\"password\", \"\")\r\n        }\r\n        //check verify_password\r\n        if (password !== verify_password){\r\n            //console.log(\"pas err\")\r\n            isValid = false;\r\n            this.showValidationErr(\"verify_password\", \"Xác nhận mật khẩu không đúng \")\r\n        } else {\r\n            this.showValidationErr(\"verify_password\", \"\")\r\n        }\r\n        // check dieu kien\r\n        if(isValid){\r\n            // console.log(\"ok\")\r\n            callApi('user', 'POST', {\r\n                name: name,\r\n                address: address,\r\n                phone_number: phone_number,\r\n                email: email,\r\n                password: password\r\n            }, \r\n            {withCredentials: true}).then(res => {\r\n                history.push(\"/login\"); \r\n            }) \r\n        }\r\n        \r\n        \r\n    }\r\n    render(){\r\n        //var {name, phone_number, email, password, verify_password} = this.state;\r\n        let addressErr, phone_numberErr, passwordErr, nameErr, emailErr, verify_passwordErr = null;\r\n        for(let err of this.state.errors){\r\n            if(err.elm === \"phone_number\"){\r\n                phone_numberErr = err.msg\r\n            } \r\n            if (err.elm === \"password\"){\r\n                passwordErr = err.msg\r\n            }\r\n            if (err.elm === \"name\"){\r\n                nameErr = err.msg\r\n            }\r\n            if (err.elm === \"address\"){\r\n                addressErr = err.msg\r\n            }\r\n            if (err.elm === \"email\"){\r\n                emailErr = err.msg\r\n            }\r\n            \r\n            if (err.elm === \"verify_password\"){\r\n                verify_passwordErr = err.msg\r\n            }\r\n        }\r\n\r\n        return(\r\n            <div className=\"container\">\r\n                <div className=\"breadcrumbs\">\r\n                    <ol className=\"breadcrumb\">\r\n                    <li><NavLink to=\"/\">Trang Chủ</NavLink></li>\r\n                    <li className=\"active\">Đăng Ký</li>\r\n                    </ol>\r\n                </div>\r\n\r\n                <div className=\"row signup\">\r\n                    <div className=\"col-sm-6 col-sm-offset-2\">\r\n                        <div className=\"login-form\">\r\n                            <h2>Đăng Ký Tài Khoản</h2>\r\n                            <form onSubmit={this.handleSubmit} action=\"#\" className=\"signup-form\">  \r\n                                <input \r\n                                    type=\"text\"\r\n                                    id=\"name\"\r\n                                    name=\"name\" \r\n                                    value={this.state.name}\r\n                                    placeholder=\"Họ Tên\" \r\n                                    \r\n                                    onChange={this.handleChange} \r\n                                />\r\n                                <small className=\"text-danger\"> {nameErr ? nameErr : \"\"} </small>\r\n                                <input \r\n                                    type=\"text\"\r\n                                    id=\"address\"\r\n                                    name=\"address\" \r\n                                    value={this.state.address}\r\n                                    placeholder=\"Địa Chỉ\" \r\n                                    \r\n                                    onChange={this.handleChange} \r\n                                />\r\n                                <small className=\"text-danger\"> {addressErr ? addressErr : \"\"} </small>\r\n                                <input \r\n                                    type=\"text\" \r\n                                    id=\"phone_number\" \r\n                                    name=\"phone_number\" \r\n                                    value={this.state.phone_number} \r\n                                    placeholder=\"Số Điện Thoại\"\r\n                                    onChange={this.handleChange} \r\n                                   \r\n                                />\r\n                                <small className=\"text-danger\"> {phone_numberErr ? phone_numberErr : \"\"} </small>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    id=\"email\" \r\n                                    name=\"email\" \r\n                                    value={this.state.email}\r\n                                    placeholder=\"Email\"  \r\n                                   onChange={this.handleChange}\r\n                                  \r\n                                />\r\n                                <small className=\"text-danger\"> {emailErr ? emailErr : \"\"} </small>\r\n                                <input \r\n                                type=\"password\"\r\n                                    id=\"password\" \r\n                                    name=\"password\" \r\n                                    value={this.state.password} \r\n                                    placeholder=\"Mật Khẩu\" \r\n                                    onChange={this.handleChange} \r\n                                    \r\n                                />\r\n                                 <small className=\"text-danger\"> {passwordErr ? passwordErr : \"\"} </small>\r\n                                <input \r\n                                    type=\"password\"\r\n                                    id=\"verify_password\" \r\n                                    value={this.state.verify_password}\r\n                                    name=\"verify_password\"\r\n                                    placeholder=\"Xác Nhận Mật Khẩu\" \r\n                                   onChange={this.handleChange} \r\n                                  \r\n                                />\r\n                                <small className=\"text-danger\"> {verify_passwordErr ? verify_passwordErr : \"\"} </small>\r\n                                <button type=\"submit\" className=\"btn btn-default\">Đăng Ký</button>\r\n                                \r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n//export default Signup;\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        users: state.user\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, props) => {\r\n    return {\r\n        allUsers: () => {\r\n            dispatch(signInRequest());\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Signup);"]},"metadata":{},"sourceType":"module"}